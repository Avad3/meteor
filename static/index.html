<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meteor Demo</title>
  <script src="https://unpkg.com/@mercuryworkshop/bare-mux@1.1.4/dist/bare.cjs"></script>
  <script src="/meteor.bundle.js"></script>
  <script src="/meteor.config.js"></script>
</head>

<body>
  <input type="text" id="input">
  <button id="go">Go</button>

  <script>
    document.querySelector("button").onclick = async () => {
      const input = document.querySelector("input")

      if ('serviceWorker' in navigator) {
        const registration = await navigator.serviceWorker.register('/sw.js')
        await registration.update()

        BareMux.SetTransport("BareMod.BareClient", "https://tomp.app")
        window.location.href = Meteor.rewrite.url.encode(input.value)
      }
    }
  </script>
</body>

</html>